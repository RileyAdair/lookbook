<template>
  <div class="about" ref="about">
    <div class="about__wrap" ref="wrap">
      <div class="about__body" ref="body">
        <h1 class="about__header">Just Look At It</h1>
        <p class="about__text about__text--main">Lookbook is a creative outlet - <br />an exploration of interactions and animations. Inspired by prototypes on <a href="https://dribbble.com/" target="_blank" class="about__link">dribbble.com<span class="about__border about__border--dribbble" ref="border"></span></a></p>
        <div class="about__credits js-credits">
          <ul class="about__list">
            <li class="about__list-item"><span class="thin">Nike SB Lookbook by </span><a href="https://dribbble.com/shots/4884140-Nike-SB-Lookbook" target="_blank" class="about__link">Craig Gittins<span class="about__border" ref="border"></span></a></li>
            <li class="about__list-item"><span class="thin">Max Colt VFX by </span><a href="https://dribbble.com/shots/5449199-Maxcolt-VFX-Producer" target="_blank" class="about__link">Advanced Group<span class="about__border" ref="border"></span></a></li>
            <li class="about__list-item"><span class="thin">Various works of </span><a href="https://dribbble.com/nathanriley" target="_blank" class="about__link">Nathan Riley<span class="about__border" ref="border"></span></a></li>
            <li class="about__list-item"><span class="thin">Various works of </span><a href="https://dribbble.com/Zhenya_Artem" target="_blank" class="about__link">Zhenya Rynzhuk<span class="about__border" ref="border"></span></a></li>
            <li class="about__list-item"><span class="thin">Various works of </span><a href="https://dribbble.com/crnacura" target="_blank" class="about__link">Mary Lou<span class="about__border" ref="border"></span></a></li>
          </ul>
          <p class="about__text"><span class="thin">Images from </span><a href="https://unsplash.com/" target="_blank" class="about__link">unsplash.com<span class="about__border" ref="border"></span></a></p>
          <!-- <p class="about__text"><span class="thin">Have a design but need someone to bring it to life? <br/>Hit me up </span><a href="mailto:hello@rileyadair.com" class="about__link">hello@rileyadair.com<span class="about__border" ref="border"></span></a><span class="about__peace">âœŒ</span></p> -->
          <p class="about__text"><a href="https://rileyadair.com/" target="_blank" class="about__link">rileyadair.com<span class="about__border" ref="border"></span></a></p>
        </div>
      </div>
    </div>
    <svg class="about__logo js-hover" ref="logo" data-gif width="260px" height="466px" viewBox="0 0 260 466" fill="#FFFFFF">
      <g>
        <path class="js-path" d="M47.4014455,85.0828729 C47.4014455,88.6924674 46.7838432,92.1215307 45.5486202,95.3701657 C44.3133972,98.6188008 42.5377908,101.480651 40.2217477,103.955801 C37.9057046,106.430952 35.1007611,108.390416 31.8068331,109.834254 C28.5129051,111.278092 24.7558249,112 20.5354796,112 C15.4916524,112 11.2971039,110.891355 7.95170828,108.674033 C4.60631266,106.456711 1.95576974,104.265204 0,102.099448 L12.3521682,92.198895 C13.4844559,93.333339 14.7968607,94.287289 16.2894218,95.0607735 C17.7819829,95.834258 19.3517219,96.2209945 20.9986859,96.2209945 C21.9251032,96.2209945 23.0059071,96.0405175 24.2411301,95.679558 C25.4763531,95.3185986 26.6343573,94.6482554 27.7151774,93.6685083 C28.7959975,92.6887612 29.7224009,91.3480748 30.4944152,89.6464088 C31.2664296,87.9447429 31.652431,85.7016714 31.652431,82.9171271 L31.652431,0.928176796 L47.4014455,0.928176796 L47.4014455,85.0828729 Z M113.176741,86.320442 C113.176741,89.9300365 112.507672,93.2817525 111.169514,96.3756906 C109.831356,99.4696287 108.004282,102.176784 105.688239,104.497238 C103.372196,106.817691 100.670186,108.648244 97.5821288,109.98895 C94.4940713,111.329657 91.2001927,112 87.7003942,112 C84.2005957,112 80.9067171,111.329657 77.8186597,109.98895 C74.7306022,108.648244 72.0285924,106.817691 69.7125493,104.497238 C67.3965062,102.176784 65.5694329,99.4696287 64.2312746,96.3756906 C62.8931164,93.2817525 62.2240473,89.9300365 62.2240473,86.320442 L62.2240473,0.928176796 L77.9730618,0.928176796 L77.9730618,84.7734807 C77.9730618,88.692469 78.8994651,91.5801012 80.7522996,93.4364641 C82.6051341,95.292827 84.9211425,96.2209945 87.7003942,96.2209945 C90.479646,96.2209945 92.7956543,95.292827 94.6484888,93.4364641 C96.5013233,91.5801012 97.4277267,88.692469 97.4277267,84.7734807 L97.4277267,0.928176796 L113.176741,0.928176796 L113.176741,86.320442 Z M178.952037,32.640884 L163.203022,32.640884 L163.203022,29.0828729 C163.203022,25.4732785 162.353819,22.3536043 160.655388,19.7237569 C158.956956,17.0939095 156.100546,15.7790055 152.086071,15.7790055 C149.924431,15.7790055 148.148824,16.1915244 146.759198,17.0165746 C145.369573,17.8416248 144.288769,18.8987044 143.516754,20.1878453 C142.74474,21.4769862 142.204338,22.9723672 141.895532,24.6740331 C141.586726,26.3756991 141.432326,28.1546869 141.432326,30.0110497 C141.432326,32.1768064 141.509526,34.007359 141.663929,35.5027624 C141.818332,36.9981659 142.204333,38.2872874 142.821945,39.3701657 C143.439556,40.4530441 144.340226,41.406994 145.523982,42.2320442 C146.707737,43.0570944 148.328943,43.8821322 150.387648,44.7071823 L162.431012,49.5027624 C165.93081,50.843469 168.761487,52.4161972 170.923127,54.2209945 C173.084768,56.0257917 174.75744,58.139951 175.941196,60.5635359 C177.124951,62.9871208 177.922687,65.7716233 178.334428,68.9171271 C178.746169,72.0626308 178.952037,75.6463887 178.952037,79.6685083 C178.952037,84.3094155 178.488835,88.6150814 177.562418,92.5856354 C176.636001,96.5561893 175.117728,99.9594702 173.007556,102.79558 C170.897383,105.63169 168.09244,107.874762 164.592641,109.524862 C161.092843,111.174962 156.821094,112 151.777267,112 C147.968663,112 144.41745,111.329657 141.123522,109.98895 C137.829594,108.648244 134.998917,106.817691 132.631406,104.497238 C130.263895,102.176784 128.385355,99.4180639 126.995729,96.2209945 C125.606103,93.0239251 124.911301,89.5690793 124.911301,85.8563536 L124.911301,79.9779006 L140.660315,79.9779006 L140.660315,84.9281768 C140.660315,87.8158524 141.509518,90.4198779 143.20795,92.7403315 C144.906382,95.0607851 147.762792,96.2209945 151.777267,96.2209945 C154.453583,96.2209945 156.537991,95.834258 158.030552,95.0607735 C159.523113,94.287289 160.655384,93.2044269 161.427398,91.8121547 C162.199413,90.4198825 162.688348,88.6924597 162.894218,86.6298343 C163.100089,84.5672088 163.203022,82.2983549 163.203022,79.8232044 C163.203022,76.9355288 163.100089,74.5635452 162.894218,72.7071823 C162.688348,70.8508194 162.250879,69.3554385 161.5818,68.2209945 C160.912721,67.0865505 159.986318,66.158383 158.802562,65.4364641 C157.618807,64.7145452 156.049068,63.9410723 154.093298,63.1160221 L142.821945,58.4751381 C136.028218,55.6905938 131.473402,52.0037062 129.157359,47.4143646 C126.841316,42.8250231 125.683311,37.075541 125.683311,30.1657459 C125.683311,26.040495 126.249447,22.1215655 127.381735,18.4088398 C128.514022,14.696114 130.186695,11.4990926 132.399803,8.81767956 C134.612911,6.13626652 137.417854,3.99632475 140.814717,2.39779006 C144.211581,0.799255359 148.174528,1.99851297e-14 152.703679,0 C156.615219,1.99851297e-14 160.192165,0.721908066 163.434625,2.16574586 C166.677086,3.60958365 169.456296,5.51748354 171.772339,7.88950276 C174.088382,10.261522 175.863989,12.9171124 177.099212,15.8563536 C178.334435,18.7955948 178.952037,21.8121392 178.952037,24.9060773 L178.952037,32.640884 Z M201.031537,15.7790055 L182.812089,15.7790055 L182.812089,0.928176796 L235,0.928176796 L235,15.7790055 L216.780552,15.7790055 L216.780552,111.071823 L201.031537,111.071823 L201.031537,15.7790055 Z" id="JUST"></path>
        <path class="js-path" d="M14,119.928177 L29.7424286,119.928177 L29.7424286,214.292818 L60.9186106,214.292818 L60.9186106,230.071823 L14,230.071823 L14,119.928177 Z M70.1788627,145.917127 C70.1788627,141.482482 70.9505427,137.563553 72.4939257,134.160221 C74.0373088,130.756889 76.0693994,127.946604 78.5902584,125.729282 C81.1111174,123.511959 83.9406106,121.836101 87.0788228,120.701657 C90.217035,119.567213 93.3809229,119 96.5705812,119 C99.7602395,119 102.924127,119.567213 106.06234,120.701657 C109.200552,121.836101 112.030045,123.511959 114.550904,125.729282 C117.071763,127.946604 119.103854,130.756889 120.647237,134.160221 C122.19062,137.563553 122.9623,141.482482 122.9623,145.917127 L122.9623,204.082873 C122.9623,208.620649 122.19062,212.565361 120.647237,215.917127 C119.103854,219.268893 117.071763,222.053396 114.550904,224.270718 C112.030045,226.488041 109.200552,228.163899 106.06234,229.298343 C102.924127,230.432787 99.7602395,231 96.5705812,231 C93.3809229,231 90.217035,230.432787 87.0788228,229.298343 C83.9406106,228.163899 81.1111174,226.488041 78.5902584,224.270718 C76.0693994,222.053396 74.0373088,219.268893 72.4939257,215.917127 C70.9505427,212.565361 70.1788627,208.620649 70.1788627,204.082873 L70.1788627,145.917127 Z M85.9212913,204.082873 C85.9212913,207.89873 86.9759206,210.709015 89.0852107,212.513812 C91.1945009,214.318609 93.6895995,215.220994 96.5705812,215.220994 C99.4515629,215.220994 101.946661,214.318609 104.055952,212.513812 C106.165242,210.709015 107.219871,207.89873 107.219871,204.082873 L107.219871,145.917127 C107.219871,142.10127 106.165242,139.290985 104.055952,137.486188 C101.946661,135.681391 99.4515629,134.779006 96.5705812,134.779006 C93.6895995,134.779006 91.1945009,135.681391 89.0852107,137.486188 C86.9759206,139.290985 85.9212913,142.10127 85.9212913,145.917127 L85.9212913,204.082873 Z M135.926653,145.917127 C135.926653,141.482482 136.698333,137.563553 138.241716,134.160221 C139.785099,130.756889 141.817189,127.946604 144.338048,125.729282 C146.858907,123.511959 149.6884,121.836101 152.826613,120.701657 C155.964825,119.567213 159.128713,119 162.318371,119 C165.508029,119 168.671917,119.567213 171.810129,120.701657 C174.948342,121.836101 177.777835,123.511959 180.298694,125.729282 C182.819553,127.946604 184.851643,130.756889 186.395027,134.160221 C187.93841,137.563553 188.71009,141.482482 188.71009,145.917127 L188.71009,204.082873 C188.71009,208.620649 187.93841,212.565361 186.395027,215.917127 C184.851643,219.268893 182.819553,222.053396 180.298694,224.270718 C177.777835,226.488041 174.948342,228.163899 171.810129,229.298343 C168.671917,230.432787 165.508029,231 162.318371,231 C159.128713,231 155.964825,230.432787 152.826613,229.298343 C149.6884,228.163899 146.858907,226.488041 144.338048,224.270718 C141.817189,222.053396 139.785099,219.268893 138.241716,215.917127 C136.698333,212.565361 135.926653,208.620649 135.926653,204.082873 L135.926653,145.917127 Z M151.669081,204.082873 C151.669081,207.89873 152.72371,210.709015 154.833001,212.513812 C156.942291,214.318609 159.437389,215.220994 162.318371,215.220994 C165.199353,215.220994 167.694451,214.318609 169.803742,212.513812 C171.913032,210.709015 172.967661,207.89873 172.967661,204.082873 L172.967661,145.917127 C172.967661,142.10127 171.913032,139.290985 169.803742,137.486188 C167.694451,135.681391 165.199353,134.779006 162.318371,134.779006 C159.437389,134.779006 156.942291,135.681391 154.833001,137.486188 C152.72371,139.290985 151.669081,142.10127 151.669081,145.917127 L151.669081,204.082873 Z M201.197399,119.928177 L216.939828,119.928177 L216.939828,170.20442 L217.248503,170.20442 L240.244796,119.928177 L255.987224,119.928177 L234.534307,164.016575 L260,230.071823 L243.331546,230.071823 L225.428392,181.187845 L216.939828,197.121547 L216.939828,230.071823 L201.197399,230.071823 L201.197399,119.928177 Z" id="LOOK"></path>
        <path class="js-path" d="M173.495157,238 L186.590052,238 L211.085209,348 L195.371335,348 L190.749607,324.36236 L169.335602,324.36236 L164.713874,348 L149,348 L173.495157,238 Z M180.119634,269.671348 L179.811518,269.671348 L172.108639,309.530899 L187.822513,309.530899 L180.119634,269.671348 Z M220.10733,252.831461 L201.928534,252.831461 L201.928534,238 L254,238 L254,252.831461 L235.821204,252.831461 L235.821204,348 L220.10733,348 L220.10733,252.831461 Z" id="AT"></path>
        <path class="js-path" d="M179,356 L194.67623,356 L194.67623,466 L179,466 L179,356 Z M220.188525,370.831461 L202.053279,370.831461 L202.053279,356 L254,356 L254,370.831461 L235.864754,370.831461 L235.864754,466 L220.188525,466 L220.188525,370.831461 Z" id="IT"></path>
      </g>
    </svg>
  </div>
</template>

<script>
import TweenMax from 'gsap'
import Smooth from '@/services/scroll/Smooth'

export default {
  name: 'About',
  props: {
    deviceType: String
  },
  data() {
    return {
      credits: {},
      current: 0,
      links: [],
      paths: [],
      smoothInit: false
    }
  },
  mounted() {
    this.links = document.querySelectorAll('.about__link')
    this.credits = document.querySelector('.js-credits')
    this.paths = document.querySelectorAll('.js-path')
    if (this.deviceType === 'desktop') this.initSmooth()
  },
  destroyed() {
    if (this.smoothInit) this.smooth.destroy()
  },
  methods: {
    initHoverEvents() {
      this.links.forEach(el => {
        el.addEventListener('mouseenter', this.onHover)
        el.addEventListener('mouseleave', this.offHover)
      })
    },

    removeHoverEvents() {
      this.links.forEach(el => {
        el.removeEventListener('mouseenter', this.onHover)
        el.removeEventListener('mouseleave', this.offHover)
      })
    },

    onHover(e) {
      TweenMax.to(e.target.children[0], .3, {
        ease: 'Power2.easeOut',
        transformOrigin: "0% 50%",
        scaleX: 1,
      })
    },

    offHover(e) {
      TweenMax.to(e.target.children[0], .3, {
        ease: 'Power2.easeOut',
        transformOrigin: "100% 50%",
        scaleX: 0,
      })
    },

    initSmooth() {
      this.smooth = new Smooth({
        // callback: this.scale.bind(this),
        preload: false,
        native: false,
        noscrollbar: true,
        section: document.querySelector('.about__wrap'),
        vs : { mouseMultiplier: 0.4 },
      })
    },

    // Distracting
    scale(vars) {
      const current = Math.round(vars.current)
      const scale = ((current - this.current) / 130) + 1

      TweenMax.to(this.$refs.body, 1.6, {
        scaleY: scale,
        ease: 'Power2.easeOut'
      })

      this.current = current
    },

    toggle(action) {
      const delay = window.innerWidth > 1199 ? .55 : .45

      if (action === 'show') {
        setTimeout(() => this.$refs.about.scrollTo(0, 0), 0)

        this.$refs.about.style.display = 'block'
        TweenMax.set(this.$refs.about, {opacity: 1, y: '0%'})
        TweenMax.set(this.paths, {opacity: 0, y: '200%'})
        TweenMax.set(this.$refs.body, {opacity: 0, y: '10%'})

          TweenMax.staggerTo(this.paths, .6, {
            opacity: 1,
            delay: delay,
            ease: 'Sine.easeIn'
          }, .075)

          TweenMax.staggerTo(this.paths, .8, {
            y: '0%',
            delay: delay,
            ease: 'Power3.easeOut'
          }, .075)

        TweenMax.to(this.$refs.body, .7, {
          opacity: 1,
          delay: window.innerWidth > 1199 ? delay + .35 : delay,
          ease: 'Sine.easeIn'
        })

        TweenMax.to(this.$refs.body, .9, {
          y: '0%',
          delay: window.innerWidth > 1199 ? delay + .35 : delay,
          ease: 'Power2.easeOut',
          onComplete(about) {
            if (about.deviceType === 'desktop') {
              if (!about.smoothInit) {
                about.smooth.init();
                about.smoothInit = true
              } else {
                about.smooth.on()
              }

              about.initHoverEvents()
            }
          },
          onCompleteParams: [this]
        })
      }

      else {
        TweenMax.to(this.$refs.about, 0.3, {
          opacity: action === 'show' ? 1 : 0,
          y: '-20%',
          ease: 'Power1.easeIn',
          onComplete: (about) => {
            about.$refs.about.style.display = 'none'
            if (about.deviceType === 'desktop') {
              about.smooth.off()
              about.smooth.vars.current = 0
              about.smooth.vars.last = 0
              about.smooth.vars.target = 0
              about.$refs.wrap.style.transform = 'translate3d(0px, 0px, 0px)'
              about.removeHoverEvents()
            }
            // this.current = 0
            // if (window.innerWidth > 1200) {
            //   TweenMax.set(this.$refs.logo, { scaleY: 1 })
            // }
          },
          onCompleteParams: [this]
        })
      }
    }
  }
}
</script>